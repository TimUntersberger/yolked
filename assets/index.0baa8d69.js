var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,l=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n,o=(e,t)=>{for(var a in t||(t={}))r.call(t,a)&&l(e,a,t[a]);if(n)for(var a of n(t))s.call(t,a)&&l(e,a,t[a]);return e},c=(e,n)=>t(e,a(n)),i=(e,t)=>{var a={};for(var l in e)r.call(e,l)&&t.indexOf(l)<0&&(a[l]=e[l]);if(null!=e&&n)for(var l of n(e))t.indexOf(l)<0&&s.call(e,l)&&(a[l]=e[l]);return a};import{R as m,r as u,D as p,M as d,B as g,f as h,a as f,u as E,b as y,c as x,d as w,I as b,e as N,g as v,h as S,F as _,T as C,Q as k,i as O,j as I,S as T,k as R,l as z,m as P,H as q}from"./vendor.917a6e98.js";function D(e){let t=e.style||{};return t.display=e.inline?"inline-flex":"flex",e.column&&(t.flexDirection="column"),e.centerVertical&&(e.column?t.justifyContent="center":t.alignItems="center"),e.centerHorizontal&&(e.column?t.alignItems="center":t.justifyContent="center"),m.createElement("div",{className:e.className,style:t,onClick:e.onClick},e.children)}function F(e){var t=e,{style:a,columns:n,centerItemsHorizontal:r}=t,s=i(t,["style","columns","centerItemsHorizontal"]);return(a=a||{}).display="grid",n&&(a.gridTemplateColumns=n),r&&(a.justifyItems="center"),m.createElement("div",o({style:a},s),s.children)}const A=m.forwardRef(((e,t)=>{var a=e,{className:n,borderless:r,padding:s}=a,l=i(a,["className","borderless","padding"]);return n=`bg-none cursor-pointer hover:bg-gray-200 ${n}`,n+=" "+(null!=s?s:"px-2 py-1"),r||(n+=" border border-black"),m.createElement("button",c(o({},l),{ref:t,className:n}),l.children)}));function j(e){var t=e,{className:a,onChange:n,type:r,initialValue:s}=t,l=i(t,["className","onChange","type","initialValue"]);a=`px-2 border rounded ${a||""}`;const p=u.exports.useRef(null),[d,g]=u.exports.useState(s);return u.exports.useEffect((()=>{n(d),p.current.value=d}),[d]),m.createElement("input",c(o({},l),{ref:p,type:r,value:d,onInput:()=>{const e=p.current.value;"number"==r?(NaN===Number(e)&&(p.current.value=d),g(Number(e))):g(e)},className:a}))}const H=u.exports.createContext([void 0,()=>{}]),J=e=>{const[t,a]=u.exports.useState((()=>{let e=localStorage.getItem("account");return e?JSON.parse(e):e}));return u.exports.useEffect((()=>{t?localStorage.setItem("account",JSON.stringify(t)):localStorage.removeItem("account")}),[t]),m.createElement(H.Provider,{value:[t,a]},e.children)};u.exports.createContext(["fitness",()=>{}]);class V{async create_file(e){const t=await gapi.client.request({path:"drive/v3/files",method:"POST",body:e});return JSON.parse(t.body)}async get_all_by_query(e){const t=await gapi.client.request({path:"drive/v3/files",method:"GET",params:{q:e}});return JSON.parse(t.body).files}async get_one_by_query(e){const t=await gapi.client.request({path:"drive/v3/files",method:"GET",params:{q:e,pageSize:1}});return JSON.parse(t.body).files[0]}async get_all(){const e=await gapi.client.request({path:"drive/v3/files",method:"GET"});return JSON.parse(e.body).files}async create_folder(e){return this.create_file(c(o({},e),{mimeType:"application/vnd.google-apps.folder"}))}async delete_item(e){await gapi.client.request({path:"drive/v3/files/"+e,method:"DELETE"})}}const B="https://sheets.googleapis.com/v4/spreadsheets/";class G{constructor(e,t){this.id=e,this.title=t}static from_json(e){return new G(e.spreadsheetId,e.properties.title)}async append(e){await gapi.client.request({path:B+this.id+"/values/A1:append",method:"POST",body:{range:"A1",majorDimension:"ROWS",values:e},params:{valueInputOption:"RAW"}})}async clear(){await gapi.client.request({path:B+this.id+"/values/Sheet1:clear",method:"POST"})}async update(e){await gapi.client.request({path:B+this.id+"/values/Sheet1",method:"PUT",body:{range:"Sheet1",majorDimension:"ROWS",values:e},params:{valueInputOption:"RAW"}})}async get_all(){return this.get_range("Sheet1")}async get_range(e){const t=await gapi.client.request({path:B+this.id+"/values/"+e,method:"GET"});return JSON.parse(t.body).values}}class M{async create(e){const t=await gapi.client.request({path:B,method:"POST",body:{properties:{title:e}}});return G.from_json(JSON.parse(t.body))}async get_by_id(e){try{const t=await gapi.client.request({path:B+e,method:"GET"});return G.from_json(JSON.parse(t.body))}catch{return null}}async get_all(){return await W.drive.get_all_by_query("mimeType = 'application/vnd.google-apps.spreadsheet'").then((e=>e.map((e=>new G(e.id,e.name)))))}async get_all_by_query(e){return await W.drive.get_all_by_query(`mimeType = 'application/vnd.google-apps.spreadsheet' and ${e}`).then((e=>e.map((e=>new G(e.id,e.name)))))}async get_one_by_query(e){return await W.drive.get_one_by_query(`mimeType = 'application/vnd.google-apps.spreadsheet' and ${e}`).then((e=>e&&new G(e.id,e.name)))}async get_by_name(e){return await this.get_one_by_query(`name = '${e}'`)}}const U=["https://www.googleapis.com/auth/drive","https://www.googleapis.com/auth/drive.appdata"].join(" ");var W=new class{constructor(){this.initialized=!1,this.signed_in=!1,this.drive=new V,this.sheets=new M,this.event_handler=()=>{}}load(){return new Promise((e=>{gapi.load("client:auth2",(()=>{e()}))}))}init(){return new Promise((e=>{gapi.auth2.init({client_id:"783083744421-e7sv195ihcgmq1bvpqdpevneu7otam00.apps.googleusercontent.com",scope:U,ux_mode:"popup"}).then((t=>{this.initialized=!0,this.signed_in=t.isSignedIn.get(),t.isSignedIn.listen((e=>{this.signed_in=e,this.event_handler(e?"signIn":"signOut")})),this.event_handler("initialized"),e()}))}))}get_user(){return gapi.auth2.getAuthInstance().currentUser.get()}set_event_handler(e){this.event_handler=e}sign_in(){if(!this.signed_in)return gapi.auth2.getAuthInstance().signIn()}sign_out(){this.signed_in&&gapi.auth2.getAuthInstance().signOut()}};const $="__yolked_index";class L{constructor(e,t){this.name=e,this.sheet=t}async add(...e){return this.sheet.append([e])}async get_all(){return this.sheet.get_all()}}function Y(){const[,e]=u.exports.useState(0);return u.exports.useCallback((()=>{e((e=>e+1))}),[])}const K=new class extends p{constructor(){super("IndexedDatabase"),this.version(1).stores({exercises:"++id",workouts:"++id",programs:"++id",foods:"code"})}};window.IDB=K;const Q=new class{constructor(e){this.table_names=e,this.prefixed_table_names=e.map((e=>"__yolked_"+e))}async sync(e){const t=localStorage.getItem("lastSyncTime");console.log(t);for(const a of this.table_names){const t="__yolked_"+a,n=await W.sheets.get_by_name(t);if(n){const t=(await e[a].toArray()).map((e=>[JSON.stringify(e)]));await n.clear(),await n.update(t)}}localStorage.setItem("lastSyncTime",Date.now().toString())}async create_tables(){const e=[$].concat(this.prefixed_table_names),[t,...a]=await Promise.all(e.map((async e=>new L(e,await W.sheets.create(e)))));await t.sheet.append([a.map((e=>e.sheet.id))])}async cleanup(){const e=await W.sheets.get_all_by_query([$,...this.prefixed_table_names].map((e=>`name = '${e}'`)).join(" or "));await Promise.all(e.map((e=>W.drive.delete_item(e.id))))}async init(){await W.sheets.get_by_name($)||(console.log("Creating tables"),await this.create_tables())}}(["exercises","workouts","programs"]);function X(){return K}var Z=()=>m.createElement(D,{className:"h-full",column:!0,centerVertical:!0,centerHorizontal:!0},"Yolked"),ee=e=>m.createElement("svg",{width:e.width||38,height:e.height||38,stroke:e.color,viewBox:"0 0 38 38",className:"svg-loaders-svg"+(e.className?` ${e.className}`:"")},m.createElement("defs",null,m.createElement("linearGradient",{x1:"8.042%",y1:"0%",x2:"65.682%",y2:"23.865%",id:"prefix__a"},m.createElement("stop",{stopColor:e.color,stopOpacity:0,offset:"0%"}),m.createElement("stop",{stopColor:e.color,stopOpacity:.631,offset:"63.146%"}),m.createElement("stop",{stopColor:e.color,offset:"100%"}))),m.createElement("g",{transform:"translate(1 1)",fill:"none",fillRule:"evenodd"},m.createElement("path",{d:"M36 18c0-9.94-8.06-18-18-18",stroke:"url(#prefix__a)",strokeWidth:2},m.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"})),m.createElement("circle",{fill:e.color,cx:36,cy:18,r:1},m.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"0.9s",repeatCount:"indefinite"}))));function te(){const e=Q,t=X(),[a,n]=u.exports.useState(!1),[r,s]=u.exports.useState(!1),[l,o]=u.exports.useContext(H);return l?m.createElement(D,{column:!0,className:"w-full",centerHorizontal:!0},m.createElement("img",{className:"rounded-full mt-5",src:l.image}),m.createElement("span",{className:"text-2xl mt-5"},l.name),m.createElement("button",{className:"mt-auto w-full py-2 bg-gray-300",onClick:async()=>{n(!0),await e.init(),await e.sync(t),n(!1)}},a?m.createElement(ee,{height:"24",className:"mx-auto"}):"Synchronize"),m.createElement("button",{className:"w-full mt-3 py-2 bg-gray-300",onClick:()=>{!async function(e){"google"==e.kind&&(await W.load(),await W.init().catch((e=>alert("Failed to init GApi: "+JSON.stringify(e)))),gapi.auth2.getAuthInstance().signOut())}(l),o(void 0)}},"Sign out")):m.createElement(D,{className:"h-full w-full",column:!0,centerVertical:!0,centerHorizontal:!0},m.createElement(A,{onClick:()=>{s(!0),async function(){await W.load(),await W.init().catch((e=>alert("Failed to init GApi: "+JSON.stringify(e))));const e=gapi.auth2.getAuthInstance();let t=e.currentUser.get().getBasicProfile();return t||(await e.signIn(),t=e.currentUser.get().getBasicProfile()),{kind:"google",name:t.getName(),image:t.getImageUrl()}}().then((e=>{s(!1),o(e)})).catch((()=>{s(!1)}))}},r?"Signing in...":"Sign in using Google"))}function ae(e){const t=Y(),[a,n]=u.exports.useState(!1),r=[{name:"Remove Set",color:"red-600",handler:e.onRemoveRequest}];return m.createElement(D,{column:!0,className:"w-full"},m.createElement(D,{className:"w-full mt-2",onClick:()=>n(!a)},m.createElement("span",{className:"bg-gray-100 w-6 text-center rounded-md mr-auto cursor-pointer"},e.number),m.createElement("input",{type:"number",onClick:e=>e.stopPropagation(),onChange:a=>{e.set.weight=a.target.value,t()},value:e.set.weight,className:"bg-gray-100 w-12 text-center rounded-md"}),m.createElement("span",{className:"mx-2"},"x"),m.createElement("input",{onClick:e=>e.stopPropagation(),type:"number",onChange:a=>{e.set.reps=a.target.value,t()},value:e.set.reps,className:"bg-gray-100 w-12 text-center rounded-md"})),a&&m.createElement(D,{centerHorizontal:!0},r.map(((e,t)=>m.createElement(A,{key:t,borderless:!0,onClick:e.handler,className:`text-${e.color}`},e.name)))))}function ne(e){const t=Y(),a=[{name:"Remove Exercise",handler:e.onRemoveRequest}];return m.createElement(D,{column:!0,className:"w-full mt-4"},m.createElement(D,null,m.createElement("span",{className:"text-2xl"},e.exercise.name),m.createElement(d,null,m.createElement(d.Button,{className:"ml-auto"},m.createElement(g,{className:"text-xl"})),m.createElement(d.Items,{className:"absolute border bg-white right-0 mr-1 mt-2 rounded-md"},a.map(((e,t)=>m.createElement(d.Item,{onClick:e.handler,key:t,as:"p",className:"py-1 px-3 cursor-pointer hover:bg-gray-200"},e.name)))))),m.createElement("div",{className:"w-full px-5"},e.exercise.sets.map(((a,n)=>m.createElement(ae,{key:n,number:n+1,set:a,onRemoveRequest:()=>{e.exercise.sets.splice(n,1),t()}}))),m.createElement(A,{onClick:()=>{const a=e.exercise.sets[e.exercise.sets.length-1]||{};e.exercise.sets.push({weight:a.weight||"",reps:a.reps||""}),t()},borderless:!0,padding:"",className:"bg-gray-200 w-full mt-3 rounded-md"},"Add set")))}function re(e){const t=u.exports.useRef(null),[a,n]=u.exports.useState(e.initialValue||"");return m.createElement(f,{open:e.open,onClose:e.onClose,initialFocus:t,className:"fixed z-10 inset-0 overflow-y-auto"},m.createElement(D,{centerHorizontal:!0,centerVertical:!0,className:"min-h-screen"},m.createElement(f.Overlay,{className:"fixed inset-0 opacity-30 bg-black min-h-screen min-w-full"}),m.createElement(D,{column:!0,style:{height:"140px"},className:"z-10 bg-white border rounded-lg max-w-sm w-full mx-5 p-3 mt-5 mb-10"},m.createElement(f.Title,{className:"text-2xl"},"New Exercise"),m.createElement("input",{ref:t,className:"bg-gray-100 rounded mt-4 px-2 py-1",placeholder:"Name",value:a,onChange:e=>n(e.target.value)}),m.createElement(D,{className:"mt-2 mx-2"},m.createElement(A,{onClick:e.onCancel,borderless:!0,className:"text-red-600"},"Cancel"),m.createElement(A,{onClick:()=>e.onConfirm(a),borderless:!0,className:"text-green-500 ml-auto"},"Save")))))}function se(e){const t=u.exports.useRef(null),[a,n]=u.exports.useState(""),[r,s]=u.exports.useState(!1),[l,o]=u.exports.useState([]),[c,i]=u.exports.useState([]),p=X();return u.exports.useEffect((()=>{p.exercises.toArray().then(o)}),[]),u.exports.useEffect((()=>{i(h.go(a,l,{key:"name"}).map((e=>e.obj)))}),[l,a]),m.createElement(f,{open:e.open,onClose:e.onClose,initialFocus:t,className:"fixed z-10 inset-0 overflow-y-auto"},m.createElement(D,{centerHorizontal:!0,className:"min-h-screen"},m.createElement(f.Overlay,{className:"fixed inset-0 opacity-30 bg-black min-h-screen min-w-full"}),r&&m.createElement(re,{initialValue:a,open:r,onConfirm:e=>{console.log(e),p.exercises.add({name:e}).then((t=>{o([...l,{id:t,name:e}]),s(!1)})).catch((e=>alert(JSON.stringify(e))))},onCancel:()=>{s(!1)},onClose:()=>s(!1)}),m.createElement(D,{column:!0,style:{height:"90vh"},className:"bg-white z-10 border rounded-lg max-w-sm w-full mx-2 p-3 mt-5 mb-10"},m.createElement(D,null,m.createElement(f.Title,{className:"text-2xl"},"Exercises"),m.createElement("button",{onClick:()=>{s(!0)},className:"ml-auto mr-2 text-blue-400"},"Add")),m.createElement("input",{value:a,onChange:e=>n(e.target.value),className:"bg-gray-100 rounded mt-3 px-2 py-1",placeholder:"Search",ref:t}),m.createElement(D,{column:!0,className:"mt-4"},(""==a?l:c).flatMap(((t,a)=>[m.createElement("hr",{key:a+"hr"}),m.createElement("span",{onClick:()=>{e.onSelect(t),e.onClose()},key:a,className:"py-2 cursor-pointer"},t.name)])).slice(1)))))}function le(e){const[t,a]=u.exports.useState((()=>Date.now())),[n,r]=u.exports.useState(!1),[s,l]=u.exports.useState(t),[o,c]=u.exports.useState(!1),[i,p]=u.exports.useState([]),d=s-t,g="aw";return u.exports.useEffect((()=>{const e=localStorage.getItem(g);if(e){const t=JSON.parse(e);a(t.startTime),p(t.activeExercises)}}),[]),u.exports.useEffect((()=>{localStorage.setItem(g,JSON.stringify({startTime:t,activeExercises:i}))}),[i]),u.exports.useEffect((()=>{if(n)return;const e=setInterval((()=>{l(Date.now())}),1e3);return()=>{clearInterval(e)}}),[n]),m.createElement(D,{column:!0,centerHorizontal:!0,className:"w-full h-full p-3"},m.createElement(se,{open:o,onClose:()=>c(!1),onSelect:e=>{p([...i,{id:e.id,name:e.name,sets:[]}])}}),m.createElement("span",{className:"text-xl"},new Date(d).toUTCString().slice(17,26)),i.map(((e,t)=>m.createElement(ne,{key:t,exercise:e,onRemoveRequest:()=>{p([...i.slice(0,t),...i.slice(t+1)])}}))),m.createElement(A,{onClick:()=>c(!0),borderless:!0,className:"bg-blue-200 w-full mt-5"},"Add exercise"),m.createElement(D,{className:"w-full mt-2"},m.createElement(A,{onClick:()=>{r(!0),localStorage.removeItem(g),console.log("canceled"),e.onCancel()},borderless:!0,className:"bg-red-200 w-full"},"Cancel workout"),m.createElement(A,{onClick:()=>{r(!0),localStorage.removeItem(g),e.onFinish(t,s,i)},borderless:!0,className:"bg-green-200 ml-2 w-full"},"Finish workout")))}const oe={fitness:[{name:"PROFILE",icon:y,handler:e=>{e.push("/fitness/profile"),console.log("profile")}},{name:"HISTORY",icon:x,handler:e=>{e.push("/fitness/history"),console.log("history")}},{name:"WORKOUT",icon:w,handler:e=>{e.push("/fitness/active"),console.log("workout")}},{name:"FOOD",icon:b,handler:e=>{e.push("/food")}}],food:[{name:"PROFILE",icon:y,handler:e=>{e.push("/food/profile"),console.log("profile")}},{name:"PROGRESS",icon:N,handler:e=>{e.push("/food/progress")}},{name:"DIARY",icon:v,handler:e=>{e.push("/food/diary")}},{name:"FITNESS",icon:S,handler:e=>{e.push("/fitness")}}]};function ce(e){const t=E(),a=oe[e.mode];return m.createElement(F,{centerItemsHorizontal:!0,columns:`repeat(${a.length}, 1fr)`,className:"bg-gray-100 mt-auto pb-5 shadow"},a.map((e=>m.createElement(D,{column:!0,centerHorizontal:!0,className:"cursor-pointer text-t p-2 hover:bg-gray-200 w-full",onClick:()=>e.handler(t)},m.createElement(e.icon,{className:"text-2xl"}),e.name))))}function ie(e){const t=u.exports.useRef(null);return m.createElement(f,{open:e.open,onClose:e.onCancel,className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:t},m.createElement(f.Overlay,{className:"fixed inset-0 opacity-30 bg-black min-h-screen min-w-full"}),m.createElement(D,{centerVertical:!0,centerHorizontal:!0,className:"min-h-screen"},m.createElement(D,{column:!0,className:"z-10 bg-white border rounded-lg max-w-sm w-full mx-5 p-5 mt-5 mb-10"},m.createElement("span",{className:"text-xl"},e.message),m.createElement(D,{className:"mt-5"},m.createElement(A,{padding:"px-2",className:"ml-auto rounded border-green-500 text-green-500",onClick:()=>e.onConfirm()},"Yes"),m.createElement(A,{padding:"px-2",className:"ml-2 rounded border-red-500 text-red-500",ref:t,onClick:()=>e.onCancel()},"No")))))}const me=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],ue=["January","Feburary","March","April","June","July","August","September","October","November","December"];function pe(e){const[t,a]=u.exports.useState(!1),n=new Date(e.workout.startTime),r=new Date(e.workout.endTime-e.workout.startTime),s=r.getHours()-1,l=r.getMinutes();return m.createElement(D,{onClick:()=>a(!t),column:!0,className:"border w-full rounded mt-3 p-2"},m.createElement(D,{className:"w-full text-lg"},m.createElement("span",null,me[n.getDay()-1],", ",n.getUTCDate(),". ",ue[n.getUTCMonth()-1]),m.createElement("span",{className:"ml-auto"},n.getHours().toString().padStart(2,"0"),":",n.getMinutes().toString().padStart(2,"0"))),m.createElement(D,{centerVertical:!0,className:"mt-1 text-gray-800"},m.createElement(_,{className:"mr-1 text-lg"}),m.createElement("span",null,s>0?m.createElement(m.Fragment,null,s,"h "):m.createElement(m.Fragment,null)," ",l>0?m.createElement(m.Fragment,null,l,"m"):m.createElement(m.Fragment,null))),t&&m.createElement(D,{column:!0},m.createElement("hr",{className:"mt-2"}),e.workout.exercises.map(((e,t)=>m.createElement(D,{column:!0,className:"mt-3"},m.createElement("span",{className:"text-lg font-bold",key:t},e.name),e.sets.map(((e,t)=>m.createElement("span",{className:"text-md",key:t},e.weight," kg x ",e.reps)))))),m.createElement(D,{className:"mt-5"},m.createElement(C,{className:"cursor-pointer ml-auto text-2xl text-red-500",onClick:()=>{e.onDelete(e.workout)}}))))}function de(){const[e,t]=u.exports.useState([]),[a,n]=u.exports.useState(),r=X();return u.exports.useEffect((()=>{r.workouts.toArray().then(t)}),[]),m.createElement(D,{column:!0,className:"w-full"},m.createElement(ie,{open:!!a,message:"Permanently delete the workout?",onConfirm:async()=>{await r.workouts.delete(a.id),t(await r.workouts.toArray()),n(void 0)},onCancel:()=>n(void 0)}),m.createElement("p",{className:"text-xl"},"Workout History"),m.createElement(D,{column:!0,className:"w-full"},e.map((e=>m.createElement(pe,{key:e.id,workout:e,onDelete:e=>n(e)})))))}function ge(e){const t=u.exports.useRef(null);return u.exports.useEffect((()=>{k.init({inputStream:{type:"LiveStream",constraints:{width:640,height:480,facingMode:"environment"},target:t.current},locate:!1,locator:{patchSize:"medium",halfSample:!1,debug:{showCanvas:!0,showPatches:!0,showFoundPatches:!0,showSkeleton:!0,showLabels:!0,showPatchLabels:!0,showRemainingPatchLabels:!0,boxFromPatches:{showTransformed:!0,showTransformedBox:!0,showBB:!0}}},multiple:!0,numOfWorkers:8,decoder:{readers:["ean_reader","upc_reader"],multiple:!0}},(function(t){if(t)return void console.error("Failed to initialize Quagga",t);k.CameraAccess.getActiveTrack().applyConstraints({advanced:[{zoom:1.5}]});const a=[];k.onDetected((t=>{t.forEach((e=>a.push(e))),a.length>20&&(k.stop(),e.onDetected(function(e){if(0==e.length)return null;const t={};let a=e[0],n=1;for(var r=0;r<e.length;r++){var s=e[r];null==t[s]?t[s]=1:t[s]++,t[s]>n&&(a=s,n=t[s])}return a}(a)))})),k.start()}))}),[]),m.createElement("div",{className:"quagga-container h-full overflow-y-hidden",ref:t})}function he(e){const[t,a]=u.exports.useState(),[n,r]=u.exports.useState(),[s,l]=u.exports.useState(),[o,c]=u.exports.useState(),[i,p]=u.exports.useState();return m.createElement(f,{open:e.open,onClose:e.onCancel||(()=>{}),className:"fixed z-10 inset-0 overflow-y-auto"},m.createElement(f.Overlay,{className:"fixed inset-0 opacity-30 bg-black min-h-screen min-w-full"}),m.createElement(D,{centerVertical:!0,centerHorizontal:!0,className:"min-h-screen"},m.createElement(D,{column:!0,style:{height:"200px"},className:"z-10 bg-white border rounded-lg max-w-sm w-full mx-5 p-5 mt-5 mb-10"},m.createElement(D,null,m.createElement(D,{column:!0},m.createElement("span",null,"Food"),m.createElement("span",{className:"mt-2"},"Company")),m.createElement(D,{column:!0,className:"ml-10"},m.createElement(j,{onChange:a,initialValue:""}),m.createElement(j,{className:"mt-2",onChange:r,initialValue:""}))),m.createElement(D,{className:"mx-auto mt-2"},m.createElement(D,{column:!0},m.createElement("span",{className:"text-center"},"Protein"),m.createElement(j,{type:"number",className:"w-12",onChange:l,initialValue:0})),m.createElement(D,{column:!0,className:"ml-2"},m.createElement("span",{className:"text-center"},"Fat"),m.createElement(j,{type:"number",className:"w-12",onChange:c,initialValue:0})),m.createElement(D,{column:!0,className:"ml-2"},m.createElement("span",{className:"text-center"},"Carbs"),m.createElement(j,{type:"number",className:"w-12",onChange:p,initialValue:0}))),m.createElement(D,{className:"mt-5"},m.createElement(O,{className:"px-2 text-4xl cursor-pointer text-red-500 rounded-full border-red-500",onClick:()=>e.onCancel&&e.onCancel()}),m.createElement(I,{className:"ml-auto px-2 text-4xl cursor-pointer text-green-500 rounded-full border-green-500",onClick:()=>e.onSave({code:e.code,name:t,company:n,calories:4*s+4*i+9*o,proteins:s,fats:o,carbs:i})})))))}function fe(){var e;const[t,a]=u.exports.useState(!1),[n,r]=u.exports.useState(!1),[s,l]=u.exports.useState(),[o,c]=u.exports.useState([]),i=X();return u.exports.useEffect((()=>{s&&i.foods.get(s.codeResult.code).then((e=>{e?c([...o,e]):r(!0)}))}),[s]),t?m.createElement(ge,{onDetected:e=>{l(e),a(!1)}}):m.createElement(m.Fragment,null,m.createElement(he,{open:n,code:null==(e=null==s?void 0:s.codeResult)?void 0:e.code,onSave:e=>{c([...o,e]),i.foods.add(e).catch(console.error),r(!1)},onCancel:()=>r(!1)}),m.createElement(D,{column:!0},m.createElement("button",{className:"border px-2",onClick:()=>a(!0)},"Add food"),o.map((e=>m.createElement("span",null,e.name," ",e.calories))),m.createElement("span",null,"Calories: ",o.map((e=>e.calories)).reduce(((e,t)=>e+t),0))))}function Ee(e){const[t,a]=u.exports.useState([]),n=X();return u.exports.useEffect((()=>{n[e.tableName].toArray().then(a)}),[e.tableName]),m.createElement("div",null,m.createElement("h2",null,e.title),t.map((t=>m.createElement("p",{key:e.getId(t)},e.getDisplayValue(t)))))}function ye(e){return m.createElement(D,{className:"p-5 h-full overflow-y-scroll"},e.children)}function xe(){const e=X(),t=E();return m.createElement(m.Fragment,null,m.createElement(ye,null,m.createElement(T,null,m.createElement(R,{exact:!0,path:"/fitness/active"},m.createElement(le,{onFinish:(a,n,r)=>{e.workouts.add({startTime:a,endTime:n,exercises:r}).then((()=>{t.push("history")}))},onCancel:()=>{t.push("history")}})),m.createElement(R,{exact:!0,path:"/fitness/profile"},m.createElement(te,null)),m.createElement(R,{exact:!0,path:"/fitness/programs"},m.createElement(Ee,{title:"Programs",tableName:"programs",getKey:e=>e.id,getDisplayValue:e=>e.name})),m.createElement(R,{exact:!0,path:"/fitness/exercises"},m.createElement(Ee,{title:"Exercises",tableName:"exercises",getKey:e=>e.id,getDisplayValue:e=>e.name})),m.createElement(R,{exact:!0,path:"/fitness/history"},m.createElement(de,null)))),m.createElement(ce,{mode:"fitness"}))}function we(){return m.createElement(m.Fragment,null,m.createElement(ye,null,m.createElement(T,null,m.createElement(R,{exact:!0,path:"/food/diary"},m.createElement(fe,null)))),m.createElement(ce,{mode:"food"}))}function be(){const[e,t]=u.exports.useState(!1),a=X();return u.exports.useEffect((()=>{a.open().then((()=>{t(!0)})).catch((e=>alert("Failed to open IndexedDatabase: "+JSON.stringify(e))))}),[]),e?m.createElement(J,null,m.createElement(D,{column:!0,className:"h-full"},m.createElement(T,null,m.createElement(R,{exact:!0,path:"/"},m.createElement(z,{to:"/fitness"})),m.createElement(R,{path:"/fitness"},m.createElement(xe,null)),m.createElement(R,{path:"/food"},m.createElement(we,null))))):m.createElement(Z,null)}P.render(m.createElement(m.StrictMode,null,m.createElement(q,null,m.createElement(be,null))),document.getElementById("root"));
